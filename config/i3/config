
#  ╻┏━┓   ┏━╸┏━┓┏┓╻┏━╸╻┏━╸
#  ┃╺━┫   ┃  ┃ ┃┃┗┫┣╸ ┃┃╺┓
#  ╹┗━┛   ┗━╸┗━┛╹ ╹╹  ╹┗━┛

# ¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤
# ¤¤¤¤  Variables  ¤¤¤¤
# ¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤

set $alt Mod1
set $mod Mod4

set $font Iosevka, Font Awesome 5 Pro, Font Awesome 5 Brands 7
set $color-bg #343434
set $color-bg-hi #444444
set $color-text #999999
set $color-purple #BD93F9
set $color-green #50FA7B

set $workspace-0 "0 "
set $workspace-1 "1 "
set $workspace-2 "2 "
set $workspace-3 "3 "
set $workspace-4 "4 "
set $workspace-5 "5 "
set $workspace-6 "6 "
set $workspace-7 "7 "
set $workspace-8 "8 "
set $workspace-9 "9 "

set $lock --no-startup-id lock
set $menu-apps --no-startup-id ~/scripts/menu-apps.sh
set $menu-clipboard --no-startup-id "rofi -modi 'clipboard:greenclip print' -run-command '{cmd}' -show clipboard"
set $menu-exit --no-startup-id ~/scripts/menu-exit.sh
set $menu-run --no-startup-id "rofi -kb-accept-entry 'Return,space' -show run"
set $menu-windows --no-startup-id "rofi -kb-accept-entry 'Return,space' -show window"
set $music-next --no-startup-id playerctl next
set $music-prev --no-startup-id playerctl previous
set $music-toggle --no-startup-id playerctl play-pause
set $qutebrowser --no-startup-id scaled-qutebrowser
set $ranger --no-startup-id term ranger
set $redshift --no-startup-id $HOME/scripts/safe-load-redshift.sh
set $term --no-startup-id term
set $todo --no-startup-id term nvim ~/todo
set $vim --no-startup-id term nvim

set $brightness-down --no-startup-id light -U 5 && pkill -RTMIN+10 i3blocks
set $brightness-up --no-startup-id light -A 5 && pkill -RTMIN+10 i3blocks
set $kill-redshift --no-startup-id pkill redshift & pkill -RTMIN+2 i3blocks
set $volume-down --no-startup-id amixer -D pulse set Master 5%- && pkill -RTMIN+8 i3blocks
set $volume-toggle --no-startup-id amixer -D pulse set Master 1+ toggle && pkill -RTMIN+8 i3blocks
set $volume-up --no-startup-id amixer -D pulse set Master 5%+ && pkill -RTMIN+8 i3blocks


# ¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤
# ¤¤¤¤  Options  ¤¤¤¤
# ¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤

default_orientation horizontal
floating_modifier $mod
workspace_auto_back_and_forth no
workspace_layout default


# ¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤
# ¤¤¤¤  Windows & Bars  ¤¤¤¤
# ¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤

floating_maximum_size 2560 x 1620
font pango: $font
hide_edge_borders smart
new_float pixel 2
new_window pixel 2

# Window types                 Border          Background       Text           Indicator       Child border
client.focused                 $color-purple   $color-purple    $color-bg      $color-green    $color-purple
client.focused_inactive        $color-purple   $color-purple    $color-bg      $color-green    $color-bg
client.unfocused               $color-bg       $color-bg        $color-text    $color-green    $color-bg
client.urgent                  $color-red      $color-red       $color-text    $color-green    $color-bg

bar {
  colors {
    background $color-bg
    statusline $color-text
    separator  $color-bg

    # Workspace type          Border           Background       Text
    focused_workspace         $color-bg-hi     $color-bg-hi     $color-green
    active_workspace          $color-bg-hi     $color-bg-hi     $color-green
    inactive_workspace        $color-bg        $color-bg        $color-text
    urgent_workspace          $color-purple    $color-purple    $color-bg
  }

  position top
  status_command i3blocks
  tray_output none

  # Disable mouse scroll.
  bindsym button4 nop
  bindsym button5 nop
}


# ¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤
# ¤¤¤¤  Workspace setttings  ¤¤¤¤
# ¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤

# Assign workspaces.
assign [class="qutebrowser"]                          → $workspace-3
assign [class="GitKraken"]                            → $workspace-4
assign [class="URxvt" title="^weechat$"]              → $workspace-6
assign [class="^Gimp.*$"]                             → $workspace-7
assign [class="Darktable"]                            → $workspace-7
assign [class="Inkscape"]                             → $workspace-7
assign [class="mpv" title="^(?!.*Qutebrowser)"]       → $workspace-8
assign [class="streamlink-twitch-gui"]                → $workspace-8

# Focus.
for_window [class="Darktable"] focus
for_window [class="GitKraken"] focus
for_window [class="Inkscape"] focus
for_window [class="URxvt" title="^weechat$"] focus
for_window [class="^Gimp.*$"] focus
for_window [class="mpv"] focus
for_window [class="qutebrowser"] focus
for_window [class="streamlink-twitch-gui"] focus

# Float.
for_window [class="URxvt" title="^Vim for Qutebrowser$"] focus, floating enable
for_window [class="URxvt" title="^bc$"] focus, floating enable
for_window [class="mpv" title="^MPV for Qutebrowser$"] focus, floating enable
for_window [window_role="bubble"] floating enable, sticky enable


# ¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤
# ¤¤¤¤  Bindings  ¤¤¤¤
# ¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤

# Number based bindings
bindsym $mod+0 workspace number $workspace-0
bindsym $mod+1 workspace number $workspace-1
bindsym $mod+2 workspace number $workspace-2
bindsym $mod+3 workspace number $workspace-3
bindsym $mod+4 workspace number $workspace-4
bindsym $mod+5 workspace number $workspace-5
bindsym $mod+6 workspace number $workspace-6
bindsym $mod+7 workspace number $workspace-7
bindsym $mod+8 workspace number $workspace-8
bindsym $mod+9 workspace number $workspace-9

bindsym $mod+Shift+0 move container to workspace number $workspace-0
bindsym $mod+Shift+1 move container to workspace number $workspace-1
bindsym $mod+Shift+2 move container to workspace number $workspace-2
bindsym $mod+Shift+3 move container to workspace number $workspace-3
bindsym $mod+Shift+4 move container to workspace number $workspace-4
bindsym $mod+Shift+5 move container to workspace number $workspace-5
bindsym $mod+Shift+6 move container to workspace number $workspace-6
bindsym $mod+Shift+7 move container to workspace number $workspace-7
bindsym $mod+Shift+8 move container to workspace number $workspace-8
bindsym $mod+Shift+9 move container to workspace number $workspace-9

# Letter & symbol based bindings
bindsym $mod+a split horizontal ;; exec $term
bindsym $mod+adiaeresis exec $volume-down
bindsym $mod+aring exec $volume-up
bindsym $mod+b exec $qutebrowser
bindsym $mod+c exec $menu-clipboard
bindsym $mod+comma exec $brightness-up
bindsym $mod+d exec $menu-run
bindsym $mod+e exec $menu-exit
bindsym $mod+f exec $ranger
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right
bindsym $mod+m exec $kill-redshift
bindsym $mod+minus exec $volume-toggle
bindsym $mod+o floating toggle
bindsym $mod+p focus parent
bindsym $mod+period exec $volume-up
bindsym $mod+plus exec $volume-toggle
bindsym $mod+q kill
bindsym $mod+r mode "resize"
bindsym $mod+s split toggle
bindsym $mod+t exec $todo
bindsym $mod+v exec $vim
bindsym $mod+w layout toggle tabbed split
bindsym $mod+x exec $lock
bindsym $mod+y sticky toggle
bindsym $mod+z exec $menu-apps

bindsym $mod+Shift+a split vertical ;; exec $term
bindsym $mod+Shift+b exec $music-toggle
bindsym $mod+Shift+comma exec $brightness-down
bindsym $mod+Shift+d exec $menu-windows
bindsym $mod+Shift+h move left 80
bindsym $mod+Shift+j move down 80
bindsym $mod+Shift+k move up 80
bindsym $mod+Shift+l move right 80
bindsym $mod+Shift+m exec $redshift
bindsym $mod+Shift+n exec $music-next
bindsym $mod+Shift+o focus mode_toggle
bindsym $mod+Shift+p focus child
bindsym $mod+Shift+period exec $volume-down
bindsym $mod+Shift+r restart
bindsym $mod+Shift+s layout toggle splitv splith
bindsym $mod+Shift+v exec $music-prev

bindsym $mod+$alt+h move workspace to output left
bindsym $mod+$alt+j move workspace to output down
bindsym $mod+$alt+k move workspace to output up
bindsym $mod+$alt+l move workspace to output right

bindsym $mod+Ctrl+l workspace next
bindsym $mod+Ctrl+h workspace prev

# Direction based bindings
bindsym $mod+Down focus down
bindsym $mod+End workspace next
bindsym $mod+Home workspace prev
bindsym $mod+Left focus left
bindsym $mod+Right focus right
bindsym $mod+Up focus up

bindsym $mod+Shift+Down move down 80
bindsym $mod+Shift+Left move left 80
bindsym $mod+Shift+Right move right 80
bindsym $mod+Shift+Up move up 80

bindsym $mod+$alt+Down move workspace to output down
bindsym $mod+$alt+Left move workspace to output left
bindsym $mod+$alt+Right move workspace to output right
bindsym $mod+$alt+Up move workspace to output up

bindsym $mod+Ctrl+Right workspace next
bindsym $mod+Ctrl+Left workspace prev

# Media based bindings
bindsym XF86AudioLowerVolume exec $volume-down
bindsym XF86AudioMute exec $volume-toggle
bindsym XF86AudioNext exec $music-next
bindsym XF86AudioPlay exec $music-toggle
bindsym XF86AudioPrev exec $music-prev
bindsym XF86AudioRaiseVolume exec $volume-up
bindsym XF86MonBrightnessDown exec $brightness-down
bindsym XF86MonBrightnessUp exec $brightness-up
bindsym XF86PowerOff exec $menu-exit

# Misc bindings
bindsym $mod+BackSpace workspace back_and_forth
bindsym $mod+Delete kill
bindsym $mod+Escape workspace prev
bindsym $mod+Return exec $term
bindsym $mod+Tab workspace next
bindsym $mod+section workspace prev
bindsym $mod+space fullscreen toggle


# ¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤
# ¤¤¤¤  Modes  ¤¤¤¤
# ¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤

mode "RESIZE" {
  bindsym h resize grow width 50 px or 10 ppt
  bindsym j resize grow height 50 px or 10 ppt
  bindsym k resize shrink height 50 px or 10 ppt
  bindsym l resize shrink width 50 px or 10 ppt

  bindsym Down resize shrink height 50 px or 10 ppt
  bindsym Left resize grow width 50 px or 10 ppt
  bindsym Right resize shrink width 50 px or 10 ppt
  bindsym Up resize grow height 50 px or 10 ppt

  bindsym BackSpace mode "default"
  bindsym Delete mode "default"
  bindsym Escape mode "default"
  bindsym Return mode "default"
  bindsym space mode "default"
}


# ¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤
# ¤¤¤¤  Autostart  ¤¤¤¤
# ¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤¤

exec --no-startup-id i3-msg workspace $workspace-1
exec --no-startup-id "sh -c 'sleep 2; exec $HOME/scripts/safe-load-redshift.sh'"
